@{
    Layout = "~/Views/Shared/Admin/_AdminLayout.cshtml";
}
<div class="container">

    <!-- Add Publication Button -->
    <div class="d-flex justify-content-end mb-3">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addPublicationModal">
            <i class="fas fa-plus"></i> Add Publication
        </button>
    </div>

    <!-- Publication Table -->
    <div class="card">
        <div class="card-header bg-primary text-white">
            <i class="fas fa-book"></i> Publication List
        </div>
        <div class="card-body">
            <table class="table table-striped table-hover" id="publicationTable">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Publication ID</th>
                        <th scope="col">Title</th>
                        <th scope="col">Author</th>
                        <th scope="col">Publisher</th>
                        <th scope="col">Publication Date</th>
                        <th scope="col">Status</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">1</th>
                        <td>PUB001</td>
                        <td>The Great Gatsby</td>
                        <td>F. Scott Fitzgerald</td>
                        <td>Scribner</td>
                        <td>1925-04-10</td>
                        <td><span class="badge bg-success">Available</span></td>
                        <td>
                            <button class="btn btn-sm btn-warning me-2" data-bs-toggle="modal" data-bs-target="#editPublicationModal">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-sm btn-danger">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">2</th>
                        <td>PUB002</td>
                        <td>To Kill a Mockingbird</td>
                        <td>Harper Lee</td>
                        <td>J.B. Lippincott & Co.</td>
                        <td>1960-07-11</td>
                        <td><span class="badge bg-danger">Borrowed</span></td>
                        <td>
                            <button class="btn btn-sm btn-warning me-2" data-bs-toggle="modal" data-bs-target="#editPublicationModal">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-sm btn-danger">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add Publication Modal -->
    <div class="modal fade" id="addPublicationModal" tabindex="-1" aria-labelledby="addPublicationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="addPublicationModalLabel"><i class="fas fa-book"></i> Add Publication</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addPublicationForm">
                        <div class="mb-3">
                            <label for="publicationId" class="form-label">Publication ID</label>
                            <input type="text" class="form-control" id="publicationId" placeholder="Enter Publication ID" required>
                        </div>
                        <div class="mb-3">
                            <label for="publicationTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="publicationTitle" placeholder="Enter Title" required>
                        </div>
                        <div class="mb-3">
                            <label for="publicationAuthor" class="form-label">Author</label>
                            <input type="text" class="form-control" id="publicationAuthor" placeholder="Enter Author" required>
                        </div>
                        <div class="mb-3">
                            <label for="publicationPublisher" class="form-label">Publisher</label>
                            <input type="text" class="form-control" id="publicationPublisher" placeholder="Enter Publisher" required>
                        </div>
                        <div class="mb-3">
                            <label for="publicationDate" class="form-label">Publication Date</label>
                            <input type="date" class="form-control" id="publicationDate" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Add Publication</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Publication Modal -->
    <div class="modal fade" id="editPublicationModal" tabindex="-1" aria-labelledby="editPublicationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-warning text-white">
                    <h5 class="modal-title" id="editPublicationModalLabel"><i class="fas fa-edit"></i> Edit Publication</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editPublicationForm">
                        <div class="mb-3">
                            <label for="editPublicationId" class="form-label">Publication ID</label>
                            <input type="text" class="form-control" id="editPublicationId" placeholder="Enter Publication ID" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="editPublicationTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="editPublicationTitle" placeholder="Enter Title" required>
                        </div>
                        <div class="mb-3">
                            <label for="editPublicationAuthor" class="form-label">Author</label>
                            <input type="text" class="form-control" id="editPublicationAuthor" placeholder="Enter Author" required>
                        </div>
                        <div class="mb-3">
                            <label for="editPublicationPublisher" class="form-label">Publisher</label>
                            <input type="text" class="form-control" id="editPublicationPublisher" placeholder="Enter Publisher" required>
                        </div>
                        <div class="mb-3">
                            <label for="editPublicationDate" class="form-label">Publication Date</label>
                            <input type="date" class="form-control" id="editPublicationDate" required>
                        </div>
                        <button type="submit" class="btn btn-warning w-100">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Add Publication Form Submission
    document.getElementById('addPublicationForm').addEventListener('submit', function (e) {
        e.preventDefault(); // Prevent form submission

        // Get form values
        const publicationId = document.getElementById('publicationId').value;
        const publicationTitle = document.getElementById('publicationTitle').value;
        const publicationAuthor = document.getElementById('publicationAuthor').value;
        const publicationPublisher = document.getElementById('publicationPublisher').value;
        const publicationDate = document.getElementById('publicationDate').value;

        // Get the table body
        const tableBody = document.querySelector('#publicationTable tbody');

        // Create a new row
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
            <th scope="row">${tableBody.children.length + 1}</th>
            <td>${publicationId}</td>
            <td>${publicationTitle}</td>
            <td>${publicationAuthor}</td>
            <td>${publicationPublisher}</td>
            <td>${publicationDate}</td>
            <td><span class="badge bg-success">Available</span></td>
            <td>
                <button class="btn btn-sm btn-warning me-2" data-bs-toggle="modal" data-bs-target="#editPublicationModal">
                    <i class="fas fa-edit"></i> Edit
                </button>
                <button class="btn btn-sm btn-danger">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </td>
        `;

        // Append the new row to the table
        tableBody.appendChild(newRow);

        // Reset the form
        this.reset();

        // Close the modal
        const modal = bootstrap.Modal.getInstance(document.getElementById('addPublicationModal'));
        modal.hide();
    });

    // Edit Publication Form Submission
    document.getElementById('editPublicationForm').addEventListener('submit', function (e) {
        e.preventDefault(); // Prevent form submission

        // Get form values
        const publicationId = document.getElementById('editPublicationId').value;
        const publicationTitle = document.getElementById('editPublicationTitle').value;
        const publicationAuthor = document.getElementById('editPublicationAuthor').value;
        const publicationPublisher = document.getElementById('editPublicationPublisher').value;
        const publicationDate = document.getElementById('editPublicationDate').value;

        // Find the row with the matching publication ID
        const rows = document.querySelectorAll('#publicationTable tbody tr');
        rows.forEach(row => {
            if (row.cells[1].textContent === publicationId) {
                row.cells[2].textContent = publicationTitle;
                row.cells[3].textContent = publicationAuthor;
                row.cells[4].textContent = publicationPublisher;
                row.cells[5].textContent = publicationDate;
            }
        });

        // Reset the form
        this.reset();

        // Close the modal
        const modal = bootstrap.Modal.getInstance(document.getElementById('editPublicationModal'));
        modal.hide();
    });
</script>